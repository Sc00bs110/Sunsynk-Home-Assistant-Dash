substitutions:
  settings_skipped_updates: "30"
  master_devicename: "master_inverter"
  slave_devicename: "slave_inverter"
  device_description: "Inverter RS485 Logger"
  master_friendly_name: "SunSynk Master"
  slave_friendly_name: "SunSynk Slave"

esphome:
  name: ${master_devicename}
  comment: '${device_description}'
  # ... (rest of the esphome section)

esp32:
  board: nodemcu-32s
  framework:
    type: arduino
  # ... (rest of the esp32 section)

logger:
  baud_rate: 0

api:
  encryption:
    key: !secret api_encryption_key

ota:
  password: !secret ota_password_sunsynk

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  # ... (rest of the wifi section)

captive_portal:

time:
  - platform: homeassistant
    id: homeassistant_time

uart:
  id: mod_bus
  tx_pin: GPIO1
  rx_pin: GPIO3
  baud_rate: 9600
  stop_bits: 1

modbus:
  id: inverter_modbus
  flow_control_pin: GPIO16

modbus_controller:
  - id: master_inverter
    address: 0x01
    modbus_id: inverter_modbus
    setup_priority: -10
    update_interval: "15s"
    command_throttle: "50ms"

  - id: slave_inverter
    address: 0x02
    modbus_id: inverter_modbus
    setup_priority: -10
    update_interval: "15s"
    command_throttle: "50ms"

# Sensors for Master Inverter
sensor:
  # Master Inverter PV1 Power
  - platform: modbus_controller
    modbus_controller_id: master_inverter
    name: "${master_friendly_name} PV1 Power"
    id: master_inverter_pv1_power
    register_type: holding
    address: 186
    # ... (rest of the sensor configuration for this sensor)

  # Master Inverter PV2 Power
  - platform: modbus_controller
    modbus_controller_id: master_inverter
    name: "${master_friendly_name} PV2 Power"
    id: master_inverter_pv2_power
    register_type: holding
    address: 187
    # ... (rest of the sensor configuration for this sensor)

  # ... (add additional PV and production sensors as needed for the master inverter)

# Sensors for Slave Inverter
  # Slave Inverter PV1 Power
  - platform: modbus_controller
    modbus_controller_id: slave_inverter
    name: "${slave_friendly_name} PV1 Power"
    id: slave_inverter_pv1_power
    register_type: holding
    address: 186
    # ... (rest of the sensor configuration for this sensor)

  # Slave Inverter PV2 Power
  - platform: modbus_controller
    modbus_controller_id: slave_inverter
    name: "${slave_friendly_name} PV2 Power"
    id: slave_inverter_pv2_power
    register_type: holding
    address: 187
    # ... (rest of the sensor configuration for this sensor)

  # ... (add additional PV and production sensors as needed for the slave inverter)

# Repeat the above for binary_sensor, switch, text_sensor, select, etc.
# Ensure to replace `modbus_controller_id` with `slave_inverter` for the slave components
# Update `name` and `id` to include "Slave" in their identifiers
